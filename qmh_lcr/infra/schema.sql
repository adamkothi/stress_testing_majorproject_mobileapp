CREATE TABLE IF NOT EXISTS scenarios (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name TEXT NOT NULL,
  retail_runoff NUMERIC(6,4) NOT NULL,
  wholesale_rolloff NUMERIC(6,4) NOT NULL,
  fx_shock NUMERIC(6,4) NOT NULL,
  extra_hqla_haircut NUMERIC(6,4) NOT NULL,
  commitment_draw NUMERIC(6,4) NOT NULL,
  created_at TIMESTAMPTZ DEFAULT now()
);

CREATE TABLE IF NOT EXISTS runs (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  scenario_id BIGINT NOT NULL REFERENCES scenarios(id) ON DELETE CASCADE,
  hqla_total NUMERIC(18,2) NOT NULL,
  ncof NUMERIC(18,2) NOT NULL,
  lcr NUMERIC(10,6) NOT NULL,  -- store ratio; display as %
  run_at TIMESTAMPTZ DEFAULT now()
);

CREATE TABLE IF NOT EXISTS assumptions (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  scenario_id BIGINT NOT NULL REFERENCES scenarios(id) ON DELETE CASCADE,
  note TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT now()
);
